<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.xr.exchange.dao.AdminDao">
    <resultMap id="baseResultMap" type="com.xr.exchange.model.AdminBean">
        <id column="id" property="id" jdbcType="INTEGER"/>
        <id column="username" property="username" jdbcType="VARCHAR"/>
        <id column="password" property="password" jdbcType="VARCHAR"/>
        <id column="realname" property="realname" jdbcType="VARCHAR"/>
        <id column="phone" property="phone" jdbcType="VARCHAR"/>
        <id column="lelevl" property="lelevl" jdbcType="VARCHAR"/>
        <id column="money" property="money" jdbcType="DECIMAL"/>
        <id column="back_ratio" property="backRatio" jdbcType="FLOAT"/>
        <id column="red_ratio" property="redRatio" jdbcType="FLOAT"/>
        <id column="company_name" property="companyName" jdbcType="VARCHAR"/>
        <id column="company_lead" property="companyLead" jdbcType="VARCHAR"/>
        <id column="company_phone" property="companyPhone" jdbcType="VARCHAR"/>
        <id column="company_tel" property="companyTel" jdbcType="VARCHAR"/>
        <id column="company_address" property="companyAddress" jdbcType="VARCHAR"/>
        <id column="parent_id" property="parentId" jdbcType="VARCHAR"/>
        <id column="last_login_time" property="lastLoginTime" jdbcType="TIMESTAMP"/>
        <id column="last_login_ip" property="lastLoginIp" jdbcType="VARCHAR"/>
        <id column="status" property="status" jdbcType="VARCHAR"/>
        <id column="add_time" property="addTime" jdbcType="TIMESTAMP"/>
    </resultMap>

    <sql id="base_column_list">
        id,
        username,
        password,
        realname,
        phone,
        lelevl,
        money,
        back_ratio,
        red_ratio,
        company_name,
        company_lead,
        company_phone,
        company_tel,
        company_address
        parent_id,
        last_login_time
        last_login_ip,
        status,
        add_time
    </sql>

    <select id="getAllAdmin" resultMap="baseResultMap">
        select
        <include refid="base_column_list"/>
        from t_admin where 1=1
        <if test="conditions!=null and conditions!=''">
            and (username LIKE '%' #{conditions} '%' or realname LIKE '%' #{conditions} '%' or phone LIKE '%' #{conditions} '%')
        </if>
        <if test="addStartTime!=null and addStartTime!=''">
            AND add_time &gt;=  CONCAT(#{addStartTime},' 00:00:00')
        </if>
        <if test="addEndTime!=null and addEndTime!=''">
            AND add_time &lt;=  CONCAT(#{addEndTime},' 23:59:59')
        </if>
    </select>
    <select id="getCountAdmin" resultType="int">
        select count(1) FROM t_admin WHERE username = trim(#{username})
    </select>
    <insert id="saveAdmin" parameterType="AdminBean"
            useGeneratedKeys="true" keyProperty="id">
        INSERT INTO `t_admin` ( `username`, `password`, `realname`, `phone`, `lelevl`, `money`, `back_ratio`, `red_ratio`, `company_name`, `company_lead`, `company_phone`, `company_tel`, `company_address`, `parent_id`, `last_login_time`, `last_login_ip`, `status`, `add_time`) VALUES
	( TRIM(#{username}), #{password}, TRIM(#{realname}), TRIM(#{phone}), #{lelevl}, #{money},TRIM(#{backRatio}), TRIM(#{redRatio}), #{companyName}, #{companyLead}, #{companyPhone}, #{companyTel}, #{companyAddress}, #{parentId}, #{lastLoginTime}, #{lastLoginIp}, #{status}, #{addTime})
    </insert>
</mapper>